<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>汉字奇趣岛 - 看图找汉字</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="game-container">
        <!-- 游戏标题 -->
        <header class="game-header">
            <h1>🍎 看图找汉字 🍎</h1>
            <div class="score-board">
                <span class="score">得分: <span id="score">0</span></span>
                <span class="level">关卡: <span id="level">1</span></span>
                <span class="time">用时: <span id="total-time">0秒</span></span>
            </div>
            <div class="category-selector">
                <label for="category-select">分类:</label>
                <select id="category-select">
                    <option value="">随机分类</option>
                </select>
                <button id="new-game-btn" class="new-game-button">新游戏</button>
            </div>
        </header>

        <!-- 游戏主区域 -->
        <main class="game-main">
            <!-- 图片显示区域 -->
            <div class="image-container">
                <img id="current-image" src="" alt="游戏图片" class="game-image">
                <!-- 反馈按钮 -->
                <button id="feedback-btn" class="feedback-button" title="图片和字不符合？点击反馈">
                    <span class="feedback-icon">⚠️</span>
                    <span class="feedback-text">反馈图字不匹配</span>
                </button>
                <!-- 常见词语显示区域 -->
                <div id="common-words-display" class="common-words-display" style="display: none;">
                    <h3>常见词语：</h3>
                    <div id="words-list" class="words-list">
                        <!-- 词语将通过JavaScript动态生成 -->
                    </div>
                </div>
            </div>

            <!-- 提示区域 -->
            <div class="voice-prompt">
                <p id="voice-text">请根据图片找出对应的汉字</p>
            </div>

            <!-- 汉字选项区域 -->
            <div class="options-container">
                <div class="options-grid" id="options-grid">
                    <!-- 汉字选项将通过JavaScript动态生成 -->
                </div>
            </div>

            <!-- 汉字信息显示区域 -->
            <div class="character-info">
                <div class="pinyin-display" id="pinyin-display"></div>
            </div>

            <!-- 反馈区域 -->
            <div class="feedback-container" id="feedback-container">
                <div class="feedback-message" id="feedback-message"></div>
            </div>
        </main>

        <!-- 控制按钮 -->
        <div class="controls">
            <button id="restart-btn" class="restart-button">重新开始</button>
            <button id="settings-btn" class="settings-button">⚙️ 设置</button>
            <button id="leaderboard-btn" class="leaderboard-button" onclick="window.location.href='/leaderboard'">🏆 排行榜</button>
        </div>

        <!-- 游戏结束弹窗 -->
        <div class="game-over-modal" id="game-over-modal">
            <div class="modal-content">
                <h2>🎉 恭喜完成！</h2>
                <p>你的得分: <span id="final-score">0</span></p>
                <p>总用时: <span id="final-time">0秒</span></p>
                <p>平均每题: <span id="average-time">0秒</span></p>
                <button id="play-again-btn" class="play-again-button">再玩一次</button>
            </div>
        </div>

        <!-- 设置弹窗 -->
        <div class="settings-modal" id="settings-modal">
            <div class="modal-content">
                <h2>⚙️ 游戏设置</h2>
                <div class="settings-content">
                    <div class="setting-item">
                        <label for="read-word-start">开始时朗读汉字:</label>
                        <input type="checkbox" id="read-word-start" checked>
                    </div>
                    <div class="setting-item">
                        <label for="read-common-words">朗读常见词语:</label>
                        <input type="checkbox" id="read-common-words" checked>
                    </div>
                    <div class="setting-item">
                        <label for="speech-rate">朗读语速:</label>
                        <input type="range" id="speech-rate" min="0.3" max="1.5" step="0.1" value="0.7">
                        <span id="rate-value">0.7</span>
                    </div>
                </div>
                <div class="settings-buttons">
                    <button id="save-settings" class="save-settings-button">保存设置</button>
                    <button id="close-settings" class="close-settings-button">关闭</button>
                </div>
            </div>
        </div>

        <!-- 昵称输入弹窗 -->
        <div class="nickname-modal" id="nickname-modal">
            <div class="modal-content">
                <h2>🎉 恭喜完成！</h2>
                <p>你的得分: <span id="final-score-nickname">0</span></p>
                <p>总用时: <span id="final-time-nickname">0秒</span></p>
                <p>平均每题: <span id="average-time-nickname">0秒</span></p>
                <div class="nickname-input">
                    <label for="nickname-input">请输入昵称参与排行榜:</label>
                    <input type="text" id="nickname-input" placeholder="输入你的昵称" maxlength="20">
                </div>
                <div class="nickname-buttons">
                    <button id="submit-score" class="submit-score-button">提交成绩</button>
                    <button id="skip-submit" class="skip-submit-button">跳过</button>
                </div>
                <div id="rank-result" class="rank-result"></div>
            </div>
        </div>

        <!-- 页面导航链接 -->
        <div class="page-navigation">
            <a href="/english" class="nav-link">🔤 切换到英语字母学习</a>
        </div>
    </div>

    <!-- 音频将通过Web Audio API生成 -->

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
